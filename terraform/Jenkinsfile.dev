pipeline {
    agent any

    environment {
        TF_HOME = 'C:\\Users\\anonimo\\Downloads\\terraform_1.7.3_windows_386'
    }

    stages {
        stage('Iniciar sesión en AWS') {
            steps {
                script {
                    withCredentials([string(credentialsId: 'AKIAQY545ZB4TGDMTG4W', variable: 'AWS_CREDENTIALS')]) {
                            // Cambia temporalmente al directorio de Terraform
                            dir(TF_HOME) {
                                // Inicializa Terraform y aplica los cambios
                                bat 'terraform init'
                                bat 'terraform apply --auto-approve'
                                // Puedes agregar más comandos Terraform según sea necesario
                            }
                    }
                }
            }
        }
    }
}
